<!DOCTYPE html>

  <head>
    <link rel="icon" href="css/icons/code.svg">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&display=swap" rel="stylesheet">  
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
   	<title>GG</title>
  </head>
  <body>
    <main class="loginForm">
      <header><img src="css/icons/user.svg" style="height: 35px;"> <label style="font-size: larger; position: absolute; height: 100%; margin-left: 10px; margin-top: 5px;">LOGIN</label></header>
      <input type="text" placeholder="USERNAME" id="username"><br>
      <div class="serverResponse" id="response"></div>
      <button id="loginBtn">LOGIN</button>
    </main>
    
    <script>
    
    var firebaseConfig = {
      apiKey: "AIzaSyDGD1OvJtu3Z0sWCvGz_MW8I8xbNRjxq84",
      authDomain: "weconnectmoto.firebaseapp.com",
      databaseURL: "https://weconnectmoto.firebaseio.com",
      projectId: "weconnectmoto",
      storageBucket: "weconnectmoto.appspot.com",
      messagingSenderId: "785399505200",
      appId: "1:785399505200:web:af31d23588f6ebeaaae8f5",
      measurementId: "G-RGXEL9WZ0P"
    };

    firebase.initializeApp(firebaseConfig);

    const loginbutton = document.getElementById("loginBtn");
    const responseTab = document.getElementById("response");
    
    loginbutton.addEventListener('click', function(){
        var userName = document.getElementById("username").value;
        var response = "";
        firebase.database().ref('USERS').on('value', function(snapshot){
          
          snapshot.forEach(element => {
            if(element.val().username == userName){
              sessionStorage.setItem("uid", userName);
              this.close();
              location.replace("pages/home.html");
            }else{
              responseTab.innerHTML = "Invalid";
            }
          });
                    
        });
    });
    
    </script>
    
  </body>

</html>