<!DOCTYPE html>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" type="text/css" href="../css/programs.css">
      <link rel="stylesheet" type="text/css" href="../css/layout.css">
      <script type="text/javascript" src="../js/responsiveness.js"></script>
      <!-- FIREBASE CONNECTION -->
      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
      
    </head>
    <body>
    <header style="border-bottom: 1px solid whitesmoke;"><a href="../index.html">Programs ></a> <strong>Master of Arts in Education</strong> <span style="float: right;"><button class="majorButtons" onclick="openModal('courseModal')"><span style="font-size: 14px; color:white;">Add Course</span></a></header>
      <main>
        <table id="dataTable">
          <tr>
            <th>Course Code</th>
            <th>Course Title</th>
            <th style="text-align: center;">Pre-requisite</th>
            <th style="text-align: center;">Co-requisite</th>
            <th width="45%">Course Description</th>
            <th style="text-align: center;">Units</th>
            <th></th>
          </tr>
          </table>
      </main>
      
      <div id="courseModal" class="insertCourseModal">
          <input type="text" id="numCode" hidden>
          <br><input type="text" placeholder="Course Code" id="courseCode"> 
          <input type="text" placeholder="Course Title" id="courseTitle"><br> 
          <textarea rows="4" cols="50" style="width: 93%; text-align: left;" id="courseDescription" placeholder="Course Desciption"></textarea><br>
          <input type="text" placeholder="Units" id="numberUnits"> 
          <br><button class="majorButtons" id="submit" style="width: 49%; padding: 8px;">Submit</button>
          <button style="width: 49%; padding: 8px; border: none;" onclick="closeModal('courseModal')" id="closeButton">Cancel</button>
        </div>
        
        <div id="1" class="insertCourseModal">
          <span style="float: right;"></spab><button onclick="closeModal()" style="background: none; font-size: 1.5vw; cursor: pointer;border: none;">&times;</button></span>
            <button>Update</button>
            <button>Remove</button>
          </div>
        
        
        <script>
          
          var firebaseConfig = {
            apiKey: "AIzaSyDGD1OvJtu3Z0sWCvGz_MW8I8xbNRjxq84",
            authDomain: "weconnectmoto.firebaseapp.com",
            databaseURL: "https://weconnectmoto.firebaseio.com",
            projectId: "weconnectmoto",
            storageBucket: "weconnectmoto.appspot.com",
            messagingSenderId: "785399505200",
            appId: "1:785399505200:web:af31d23588f6ebeaaae8f5",
            measurementId: "G-RGXEL9WZ0P"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          
         
          var i = 0;
          firebase.database().ref("MAT").on('value', function (snapshot){
            
            snapshot.forEach(element => {
           
              var content = '';
              var _code = element.val().code;
              var _title = element.val().title;
              var _description = element.val().description;
              var _unit = element.val().unit;
              var refCode = element.val().id;
              
              if( i%2 == 0)
                content += '<tr style="background-color: #f2f2f2;"><td><button style="background: none; border: none; cursor: pointer; font-size: 1vw; text-align: left; outline: none;">'+_code+'</button></td><td style="font-size: 1vw;">'+_title+'</td><td style="text-align: center;font-size: 1vw;">none</td><td style="text-align: center;font-size: 1vw;">none</td><td style="font-size: 1vw;">'+_description+'</td><td style="text-align: center; font-size: 1vw;">'+_unit+'</td><td><button style="outine: none; border: none; cursor: pointer;background: none;" onclick="deleteData('+refCode+')">Remove</button></td></tr>';
              else
                content += "<tr><td><button style='background: none; border: none; cursor: pointer; font-size: 1vw; text-align: left; outline: none;'>"+_code+"</button></td><td style='font-size: 1vw;'>"+_title+"</td><td style='text-align: center;font-size: 1vw;'>none</td><td style='text-align: center;font-size: 1vw;'>none</td><td style='font-size: 1vw;'>"+_description+"</td><td style='text-align: center; font-size: 1vw;'>"+_unit+"</td><td><button style='background: none; outline: none; border: none;cursor: pointer;' onclick='deleteData("+refCode+")'>Remove</button></td></tr>"; 
              document.getElementById('dataTable').innerHTML += content;
              i++;
            });
                 
          });
                  
                  
          const submitBtn = document.getElementById('submit');        
          submitBtn.addEventListener('click', function(){
            location.reload();
            var id = document.getElementById('numCode').value;        
            var Code = document.getElementById('courseCode').value;
            var Title = document.getElementById('courseTitle').value;
            var Description = document.getElementById('courseDescription').value;
            var NumberUnits = document.getElementById('numberUnits').value;    
          
            console.log(Code);
            firebase.database().ref("MAT/"+id).set({
                id: id,
                code: Code,
                title: Title,
                description: Description,
                unit: NumberUnits
            });
            
            
            
            document.getElementById('courseModal').style.display = "none";
            
            
          });
            
        
          function deleteData(idd){
            
              firebase.database().ref("MAT/"+idd).remove();  
              location.reload();  
                  
          }
            
            
            
          
            
        </script>
      
    </body>
</html>